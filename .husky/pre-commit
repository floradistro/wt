#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Apple Engineering Standards - Pre-commit Hook
# Ensures ZERO errors before allowing commits

echo "ğŸ Running Apple Engineering Standards checks..."

# 1. TypeScript Type Checking
echo "ğŸ“ Checking TypeScript types..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ TypeScript errors detected. Fix errors before committing."
  exit 1
fi

# 2. ESLint (zero warnings allowed)
echo "ğŸ” Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ ESLint errors/warnings detected. Fix all issues before committing."
  echo "ğŸ’¡ Tip: Run 'npm run lint:fix' to auto-fix some issues."
  exit 1
fi

echo "âœ… All checks passed! Proceeding with commit..."
